"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const i=require("element-plus/es");require("element-plus/es/components/base/style/css");require("element-plus/es/components/dialog/style/css");require("element-plus/es/components/upload/style/css");require("element-plus/es/components/button/style/css");require("element-plus/es/components/icon/style/css");const e=require("vue"),x=require("./type.js"),q=require("@iconify/vue"),p=require("element-plus"),y={class:"ul-upload"},V={class:"el-upload__tip"},k=["src"],B=e.defineComponent({name:"UlUpload"}),C=e.defineComponent({...B,props:x.uploadProps,setup(f){const o=f,r={image:["png","jpg","jpeg","ico","gif"],video:["mp4","avi","wmv","rmvb","mov","mkv"],pdf:["pdf"],word:["doc","docx"],excel:["xls","xlsx"],compress:["zip","rar"]},_=e.computed(()=>o.accept?o.accept.split(",").map(t=>r[t]).flat().map(t=>`.${t}`).join(","):""),u=e.ref(""),c=e.ref(!1),v=t=>{var s;let l=[];o.accept?o.accept.split(",").forEach(a=>{r[a]&&l.push(...r[a])}):l=Object.values(r).flat();const n=(s=t.name.split(".").pop())==null?void 0:s.toLowerCase();return n&&l.indexOf(n)===-1?(p.ElMessage.warning(`文件类型只能是${l.join("，")}！`),!1):(t.size/1024/1024>o.limitSize&&p.ElMessage.warning(`文件大小不能超过${o.limitSize}MB！`),!1)},g=t=>{u.value=t.url,c.value=!0},w=()=>{},h=()=>{p.ElMessage.warning(`文件上传数量不得超过${o.limit}个`)};return(t,l)=>{const n=i.ElIcon,s=i.ElButton,a=i.ElUpload,E=i.ElDialog;return e.openBlock(),e.createElementBlock("div",y,[e.createVNode(a,e.mergeProps(t.$props,{accept:e.unref(_),"before-upload":v,"on-preview":g,"on-remove":w,"on-exceed":h}),e.createSlots({default:e.withCtx(()=>[t.$props.listType==="picture-card"?(e.openBlock(),e.createBlock(n,{key:0},{default:e.withCtx(()=>[e.createVNode(e.unref(q.Icon),{icon:"mdi:plus"})]),_:1})):(e.openBlock(),e.createBlock(s,{key:1,type:"primary"},{default:e.withCtx(()=>[e.createTextVNode("上传")]),_:1}))]),_:2},[t.tip?{name:"tip",fn:e.withCtx(()=>[e.createElementVNode("div",V,e.toDisplayString(t.tip),1)]),key:"0"}:void 0,e.renderList(t.$slots,(d,m)=>({name:m,fn:e.withCtx(()=>[e.renderSlot(t.$slots,m)])}))]),1040,["accept"]),e.createVNode(E,{modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=d=>c.value=d)},{default:e.withCtx(()=>[e.createElementVNode("img",{"w-full":"",src:u.value,alt:"Preview Image"},null,8,k)]),_:1},8,["modelValue"])])}}});exports.default=C;
