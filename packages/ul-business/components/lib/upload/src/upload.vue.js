"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const i=require("element-plus/es");require("element-plus/es/components/base/style/css");require("element-plus/es/components/dialog/style/css");require("element-plus/es/components/upload/style/css");require("element-plus/es/components/button/style/css");require("element-plus/es/components/icon/style/css");const e=require("vue"),q=require("./type.js"),y=require("@iconify/vue"),p=require("element-plus"),V=require("lodash"),$={class:"el-upload__tip"},k=["src"],x=e.defineComponent({name:"UlUpload",__name:"upload",props:q.uploadProps,setup(f){const l=f,r={image:["png","jpg","jpeg","ico","gif"],video:["mp4","avi","wmv","rmvb","mov","mkv"],pdf:["pdf"],word:["doc","docx"],excel:["xls","xlsx"],compress:["zip","rar"]},v=e.computed(()=>{if(l.accept){const o=l.accept.split(",").map(t=>r[t]);return V.flatMapDeep(o).map(t=>`.${t}`).join(",")}return""}),u=e.ref(""),c=e.ref(!1),_=o=>{var n;let t=[];l.accept?l.accept.split(",").forEach(s=>{r[s]&&t.push(...r[s])}):t=Object.values(r).flat();const a=(n=o.name.split(".").pop())==null?void 0:n.toLowerCase();return a&&t.indexOf(a)===-1?(p.ElMessage.warning(`文件类型只能是${t.join("，")}！`),!1):(o.size/1024/1024>l.limitSize&&p.ElMessage.warning(`文件大小不能超过${l.limitSize}MB！`),!1)},g=o=>{u.value=o.url,c.value=!0},w=()=>{},h=()=>{p.ElMessage.warning(`文件上传数量不得超过${l.limit}个`)};return(o,t)=>{const a=i.ElIcon,n=i.ElButton,s=i.ElUpload,E=i.ElDialog;return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["ul-upload",[o.size&&`ul-upload__${o.size}`]])},[e.createVNode(s,e.mergeProps(o.$props,{accept:v.value,"before-upload":_,"on-preview":g,"on-remove":w,"on-exceed":h}),e.createSlots({default:e.withCtx(()=>[o.$props.listType==="picture-card"?(e.openBlock(),e.createBlock(a,{key:0},{default:e.withCtx(()=>[e.createVNode(e.unref(y.Icon),{icon:"mdi:plus"})]),_:1})):(e.openBlock(),e.createBlock(n,{key:1,type:"primary"},{default:e.withCtx(()=>[e.createTextVNode("上传")]),_:1}))]),_:2},[o.tip?{name:"tip",fn:e.withCtx(()=>[e.createElementVNode("div",$,e.toDisplayString(o.tip),1)]),key:"0"}:void 0,e.renderList(o.$slots,(d,m)=>({name:m,fn:e.withCtx(()=>[e.renderSlot(o.$slots,m)])}))]),1040,["accept"]),e.createVNode(E,{modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=d=>c.value=d)},{default:e.withCtx(()=>[e.createElementVNode("img",{"w-full":"",src:u.value,alt:"Preview Image"},null,8,k)]),_:1},8,["modelValue"])],2)}}});exports.default=x;
