"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),C=require("./type.js"),x=require("@iconify/vue"),i=require("element-plus"),y={class:"ul-upload"},V={class:"el-upload__tip"},k=["src"],$=e.defineComponent({name:"UlUpload"}),b=e.defineComponent({...$,props:C.uploadProps,setup(m){const t=m,n={image:["png","jpg","jpeg","ico","gif"],video:["mp4","avi","wmv","rmvb","mov","mkv"],pdf:["pdf"],word:["doc","docx"],excel:["xls","xlsx"],compress:["zip","rar"]},f=e.computed(()=>t.accept?t.accept.split(",").map(o=>n[o]).flat().map(o=>`.${o}`).join(","):""),p=e.ref(""),c=e.ref(!1),v=o=>{var r;let l=[];t.accept?t.accept.split(",").forEach(a=>{n[a]&&l.push(...n[a])}):l=Object.values(n).flat();const s=(r=o.name.split(".").pop())==null?void 0:r.toLowerCase();return s&&l.indexOf(s)===-1?(i.ElMessage.warning(`文件类型只能是${l.join("，")}！`),!1):(o.size/1024/1024>t.limitSize&&i.ElMessage.warning(`文件大小不能超过${t.limitSize}MB！`),!1)},_=o=>{p.value=o.url,c.value=!0},g=()=>{},w=()=>{i.ElMessage.warning(`文件上传数量不得超过${t.limit}个`)};return(o,l)=>{const s=e.resolveComponent("el-icon"),r=e.resolveComponent("el-button"),a=e.resolveComponent("el-upload"),h=e.resolveComponent("el-dialog");return e.openBlock(),e.createElementBlock("div",y,[e.createVNode(a,e.mergeProps(o.$props,{accept:e.unref(f),"before-upload":v,"on-preview":_,"on-remove":g,"on-exceed":w}),e.createSlots({default:e.withCtx(()=>[o.$props.listType==="picture-card"?(e.openBlock(),e.createBlock(s,{key:0},{default:e.withCtx(()=>[e.createVNode(e.unref(x.Icon),{icon:"mdi:plus"})]),_:1})):(e.openBlock(),e.createBlock(r,{key:1,type:"primary"},{default:e.withCtx(()=>[e.createTextVNode("上传")]),_:1}))]),_:2},[o.tip?{name:"tip",fn:e.withCtx(()=>[e.createElementVNode("div",V,e.toDisplayString(o.tip),1)]),key:"0"}:void 0,e.renderList(o.$slots,(d,u)=>({name:u,fn:e.withCtx(()=>[e.renderSlot(o.$slots,u)])}))]),1040,["accept"]),e.createVNode(h,{modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=d=>c.value=d)},{default:e.withCtx(()=>[e.createElementVNode("img",{"w-full":"",src:p.value,alt:"Preview Image"},null,8,k)]),_:1},8,["modelValue"])])}}});exports.default=b;
