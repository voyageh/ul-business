"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const d=require("element-plus/es");require("element-plus/es/components/base/style/css");require("element-plus/es/components/form/style/css");require("element-plus/es/components/row/style/css");require("element-plus/es/components/col/style/css");require("element-plus/es/components/form-item/style/css");const e=require("vue"),E=require("./type.js"),q=require("./handleConetnt.js"),i=require("lodash"),D={key:0},P={key:0},j=e.defineComponent({name:"UlForm"}),O=e.defineComponent({...j,props:E.formProps,emits:["update:modelValue"],setup(V,{expose:y,emit:F}){const m=V,f=e.ref(),n=e.ref({});let p={};e.watch(()=>m.content,o=>{const{formatObj:t,defaulValue:a}=q.default(o);p=t,n.value=Object.assign(a,n.value)},{immediate:!0,deep:!0});const b=()=>{const{content:o,modelValue:t,...a}=m;return a},k=o=>{const{id:t,type:a,component:u,default:s,str:c,forceDisabled:r,inputFormat:l,outputFormat:v,el:h,hide:S,span:U,...C}=o;return C},_=o=>{let t=!o;return typeof o=="function"&&(t=!o(n.value)),t},B=()=>{let o=i.cloneDeep(n.value)||{};return Object.keys(o).forEach(t=>{var a,u,s;if(o[t]&&((a=p[t])!=null&&a.outputFormat)){const c=(s=(u=p[t]).outputFormat)==null?void 0:s.call(u,o);Object.assign(o,c)}}),o},g=o=>{let t=i.cloneDeep(o)||{};return Object.keys(t).forEach(a=>{var u,s,c;if(t[a]&&((u=p[a])!=null&&u.inputFormat)){const r=p[a]&&((c=(s=p[a]).inputFormat)==null?void 0:c.call(s,t));Object.assign(t,r)}}),t},w=o=>{n.value=g(o)};return m.modelValue&&(e.watch(()=>m.modelValue,o=>{if(o&&!i.isEqual(o,n.value)){const t=g(o);n.value=Object.assign({},n.value,t)}},{immediate:!0,deep:!0}),e.watch(()=>n.value,async()=>{const o=await B();F("update:modelValue",o)},{deep:!0,immediate:!0})),y({getValue:B,setValue:w,elFrom:f}),(o,t)=>{const a=d.ElFormItem,u=d.ElCol,s=d.ElRow,c=d.ElForm;return e.openBlock(),e.createBlock(c,e.mergeProps({ref_key:"formRef",ref:f,class:"ul-form"},b(),{model:n.value}),{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.content,r=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[r.type==="row"&&r.items?(e.openBlock(),e.createBlock(s,{key:0,gutter:20},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.items||[],l=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:l.id},[_(l.hide)?(e.openBlock(),e.createBlock(u,{key:0,xs:{span:24},sm:{span:12},md:{span:8},lg:{span:l.span||6}},{default:e.withCtx(()=>[e.createVNode(a,e.mergeProps({prop:l.id},k(l)),{default:e.withCtx(()=>[o.disabled&&!r.forceDisabled?(e.openBlock(),e.createElementBlock("span",D,e.toDisplayString(l.str?n.value[l.str]:n.value[l.id]),1)):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.type||l.component),e.mergeProps({key:1},l.el,{modelValue:n.value[l.id],"onUpdate:modelValue":v=>n.value[l.id]=v}),null,16,["modelValue","onUpdate:modelValue"]))]),_:2},1040,["prop"])]),_:2},1032,["lg"])):e.createCommentVNode("",!0)],64))),128))]),_:2},1024)):e.createCommentVNode("",!0),_(r.hide)?(e.openBlock(),e.createBlock(a,e.mergeProps({key:1,prop:r.id},k(r)),{default:e.withCtx(()=>[o.disabled&&!r.forceDisabled?(e.openBlock(),e.createElementBlock("span",P,e.toDisplayString(r.str?n.value[r.str]:n.value[r.id]),1)):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(r.type||r.component),e.mergeProps({key:1},r.el,{modelValue:n.value[r.id],"onUpdate:modelValue":l=>n.value[r.id]=l}),null,16,["modelValue","onUpdate:modelValue"]))]),_:2},1040,["prop"])):e.createCommentVNode("",!0)],64))),256)),e.renderSlot(o.$slots,"last")]),_:3},16,["model"])}}});exports.default=O;
