"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),w=require("./type.js"),D=require("./handleConetnt.js"),d=require("lodash"),E={key:0},P={key:0},j=e.defineComponent({name:"UlForm"}),O=e.defineComponent({...j,props:w.formProps,emits:["update:modelValue"],setup(g,{expose:V,emit:y}){const m=g,f=e.ref(),l=e.ref({});let p={};e.watch(()=>m.content,o=>{const{formatObj:t,defaulValue:a}=D.default(o);p=t,l.value=Object.assign(a,l.value)},{immediate:!0,deep:!0});const C=()=>{const{content:o,modelValue:t,...a}=m;return a},i=o=>{const{id:t,type:a,component:s,default:u,str:c,forceDisabled:n,inputFormat:r,outputFormat:B,el:h,hide:q,span:S,...b}=o;return b},k=o=>{let t=!o;return typeof o=="function"&&(t=!o(l.value)),t},_=()=>{let o=d.cloneDeep(l.value)||{};return Object.keys(o).forEach(t=>{var a,s,u;if(o[t]&&((a=p[t])!=null&&a.outputFormat)){const c=(u=(s=p[t]).outputFormat)==null?void 0:u.call(s,o);Object.assign(o,c)}}),o},v=o=>{let t=d.cloneDeep(o)||{};return Object.keys(t).forEach(a=>{var s,u,c;if(t[a]&&((s=p[a])!=null&&s.inputFormat)){const n=p[a]&&((c=(u=p[a]).inputFormat)==null?void 0:c.call(u,t));Object.assign(t,n)}}),t},F=o=>{l.value=v(o)};return m.modelValue&&(e.watch(()=>m.modelValue,o=>{if(o&&!d.isEqual(o,l.value)){const t=v(o);l.value=Object.assign({},l.value,t)}},{immediate:!0,deep:!0}),e.watch(()=>l.value,async()=>{const o=await _();y("update:modelValue",o)},{deep:!0,immediate:!0})),V({getValue:_,setValue:F,elFrom:f}),(o,t)=>{const a=e.resolveComponent("el-form-item"),s=e.resolveComponent("el-col"),u=e.resolveComponent("el-row"),c=e.resolveComponent("el-form");return e.openBlock(),e.createBlock(c,e.mergeProps({ref_key:"formRef",ref:f,class:"ul-form"},C(),{model:l.value}),{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.content,n=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[n.type==="row"&&n.items?(e.openBlock(),e.createBlock(u,{key:0,gutter:20},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.items||[],r=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:r.id},[k(r.hide)?(e.openBlock(),e.createBlock(s,{key:0,xs:{span:24},sm:{span:12},md:{span:8},lg:{span:r.span||6}},{default:e.withCtx(()=>[e.createVNode(a,e.mergeProps({prop:r.id},i(r)),{default:e.withCtx(()=>[o.disabled&&!n.forceDisabled?(e.openBlock(),e.createElementBlock("span",E,e.toDisplayString(r.str?l.value[r.str]:l.value[r.id]),1)):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(r.type||r.component),e.mergeProps({key:1},r.el,{modelValue:l.value[r.id],"onUpdate:modelValue":B=>l.value[r.id]=B}),null,16,["modelValue","onUpdate:modelValue"]))]),_:2},1040,["prop"])]),_:2},1032,["lg"])):e.createCommentVNode("",!0)],64))),128))]),_:2},1024)):e.createCommentVNode("",!0),k(n.hide)?(e.openBlock(),e.createBlock(a,e.mergeProps({key:1,prop:n.id},i(n)),{default:e.withCtx(()=>[o.disabled&&!n.forceDisabled?(e.openBlock(),e.createElementBlock("span",P,e.toDisplayString(n.str?l.value[n.str]:l.value[n.id]),1)):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.type||n.component),e.mergeProps({key:1},n.el,{modelValue:l.value[n.id],"onUpdate:modelValue":r=>l.value[n.id]=r}),null,16,["modelValue","onUpdate:modelValue"]))]),_:2},1040,["prop"])):e.createCommentVNode("",!0)],64))),256)),e.renderSlot(o.$slots,"last")]),_:3},16,["model"])}}});exports.default=O;
