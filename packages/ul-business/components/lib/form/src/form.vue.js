"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const d=require("element-plus/es");require("element-plus/es/components/base/style/css");require("element-plus/es/components/form/style/css");require("element-plus/es/components/row/style/css");require("element-plus/es/components/col/style/css");require("element-plus/es/components/form-item/style/css");const e=require("vue"),E=require("./type.js"),D=require("./handleConetnt.js"),i=require("lodash"),q={key:1},P={key:0},j={key:1},O={key:0},S=e.defineComponent({name:"UlForm",__name:"form",props:E.formProps,emits:["update:modelValue"],setup(g,{expose:v,emit:V}){const m=g,f=e.ref(),r=e.ref({});let p={};e.watch(()=>m.content,o=>{const{formatObj:n,defaulValue:a}=D.default(o);p=n,r.value=Object.assign(a,r.value)},{immediate:!0,deep:!0});const F=()=>{const{content:o,modelValue:n,...a}=m;return a},k=o=>{const{id:n,type:a,component:s,default:c,str:u,forceDisabled:t,inputFormat:l,outputFormat:b,el:h,hide:x,span:U,label:N,...w}=o;return w},B=o=>{let n=!o;return typeof o=="function"&&(n=!o(r.value)),n},_=()=>{let o=i.cloneDeep(r.value)||{};return Object.keys(o).forEach(n=>{var a,s,c;if(o[n]&&((a=p[n])!=null&&a.outputFormat)){const u=(c=(s=p[n]).outputFormat)==null?void 0:c.call(s,o);Object.assign(o,u)}}),o},y=o=>{let n=i.cloneDeep(o)||{};return Object.keys(n).forEach(a=>{var s,c,u;if(n[a]&&((s=p[a])!=null&&s.inputFormat)){const t=p[a]&&((u=(c=p[a]).inputFormat)==null?void 0:u.call(c,n));Object.assign(n,t)}}),n},C=o=>{r.value=y(o)};return m.modelValue&&(e.watch(()=>m.modelValue,o=>{if(o&&!i.isEqual(o,r.value)){const n=y(o);r.value=Object.assign({},r.value,n)}},{immediate:!0,deep:!0}),e.watch(()=>r.value,async()=>{const o=await _();V("update:modelValue",o)},{deep:!0,immediate:!0})),v({getValue:_,setValue:C,elFrom:f}),(o,n)=>{const a=d.ElFormItem,s=d.ElCol,c=d.ElRow,u=d.ElForm;return e.openBlock(),e.createBlock(u,e.mergeProps({ref_key:"formRef",ref:f,class:"ul-form"},F(),{model:r.value}),{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.content,t=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[t.type==="row"&&t.items?(e.openBlock(),e.createBlock(c,{key:0,gutter:20},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.items||[],l=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:l.id},[B(l.hide)?(e.openBlock(),e.createBlock(s,{key:0,xs:{span:24},sm:{span:12},md:{span:8},lg:{span:l.span||6}},{default:e.withCtx(()=>[e.createVNode(a,e.mergeProps({prop:l.id},k(l)),{label:e.withCtx(()=>[l.label&&typeof l.label=="function"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.label()),{key:0})):(e.openBlock(),e.createElementBlock("span",q,e.toDisplayString(l.label),1))]),default:e.withCtx(()=>[o.disabled&&!t.forceDisabled?(e.openBlock(),e.createElementBlock("span",P,e.toDisplayString(l.str?r.value[l.str]:r.value[l.id]),1)):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.type||l.component),e.mergeProps({key:1},l.el,{modelValue:r.value[l.id],"onUpdate:modelValue":b=>r.value[l.id]=b}),null,16,["modelValue","onUpdate:modelValue"]))]),_:2},1040,["prop"])]),_:2},1032,["lg"])):e.createCommentVNode("",!0)],64))),128))]),_:2},1024)):e.createCommentVNode("",!0),B(t.hide)?(e.openBlock(),e.createBlock(a,e.mergeProps({key:1,prop:t.id},k(t)),{label:e.withCtx(()=>[t.label&&typeof t.label=="function"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.label()),{key:0})):(e.openBlock(),e.createElementBlock("span",j,e.toDisplayString(t.label),1))]),default:e.withCtx(()=>[o.disabled&&!t.forceDisabled?(e.openBlock(),e.createElementBlock("span",O,e.toDisplayString(t.str?r.value[t.str]:r.value[t.id]),1)):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.type||t.component),e.mergeProps({key:1},t.el,{modelValue:r.value[t.id],"onUpdate:modelValue":l=>r.value[t.id]=l}),null,16,["modelValue","onUpdate:modelValue"]))]),_:2},1040,["prop"])):e.createCommentVNode("",!0)],64))),256)),e.renderSlot(o.$slots,"final")]),_:3},16,["model"])}}});exports.default=S;
